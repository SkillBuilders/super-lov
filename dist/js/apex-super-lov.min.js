!function(e,t,n,a){"use strict";e.widget("ui.apex_super_lov",{options:{enterable:null,returnColNum:null,displayColNum:null,hiddenCols:null,searchableCols:null,mapFromCols:null,mapToItems:null,maxRowsPerPage:null,dialogTitle:null,useClearProtection:null,noDataFoundMsg:null,loadingImageSrc:null,ajaxIdentifier:null,reportHeaders:null,effectsSpeed:null,dependingOnSelector:null,pageItemsToSubmit:null,debug:t.getLevel()},_createPrivateStorage:function(){var n=this;if(n.options.debug&&t.info("Super LOV - Create Private Storage ("+e(n.element).attr("id")+")"),n._values={apexItemId:"",controlsId:"",deleteIconTimeout:"",searchString:"",pagination:"",fetchLovInProcess:!1,fetchLovMode:"",active:!1,ajaxReturn:"",curPage:"",moreRows:!1,wrapperHeight:0,dialogHeight:0,dialogWidth:0,dialogTop:0,dialogLeft:0,percentRegExp:/^-?[0-9]+\.?[0-9]*%$/,pixelRegExp:/^-?[0-9]+\.?[0-9]*px$/i,hiddenCols:n.options.hiddenCols?n.options.hiddenCols.split(","):[],searchableCols:n.options.searchableCols?n.options.searchableCols.split(","):[],mapFromCols:n.options.mapFromCols?n.options.mapFromCols.split(","):[],mapToItems:n.options.mapToItems?n.options.mapToItems.split(","):[],bodyKeyMode:"SEARCH",disabled:!1,focusOnClose:"BUTTON",ENTERABLE_RESTRICTED:"ENTERABLE_RESTRICTED",ENTERABLE_UNRESTRICTED:"ENTERABLE_UNRESTRICTED",lastDisplayValue:"",changePropagationAllowed:!1},n.options.debug){t.info("...Private Values");for(name in n._values)t.info("......"+name+': "'+n._values[name]+'"')}if(n._elements={$itemHolder:{},$window:{},$hiddenInput:{},$displayInput:{},$label:{},$fieldset:{},$clearButton:{},$openButton:{},$outerDialog:{},$dialog:{},$buttonContainer:{},$searchContainer:{},$paginationContainer:{},$columnSelect:{},$filter:{},$goButton:{},$prevButton:{},$paginationDisplay:{},$nextButton:{},$wrapper:{},$table:{},$nodata:{},$moreRows:{},$selectedRow:{},$actionlessFocus:{}},n.options.debug){t.info("...Cashed Elements");for(name in n._elements)t.info("......"+name+': "'+n._elements[name]+'"')}},_create:function(){var n,a,l,s,o,i=this;if(i.options.debug){t.info("Super LOV - Initialize ("+e(i.element).attr("id")+")"),t.info("...Options");for(name in i.options)t.info("......"+name+': "'+i.options[name]+'"')}i._createPrivateStorage(),i._values.apexItemId=e(i.element).attr("id"),i._values.controlsId=i._values.apexItemId+"_fieldset",i._initBaseElements(),i._values.lastDisplayValue=i._elements.$displayInput.val(),n=i._elements.$displayInput.css("background-color"),a=i._elements.$displayInput.css("background-image"),l=i._elements.$displayInput.css("background-repeat"),s=i._elements.$displayInput.css("background-attachment"),o=i._elements.$displayInput.css("background-position"),i._elements.$fieldset.css({"background-color":n,"background-image":a,"background-repeat":l,"background-attachment":s,"background-position":o}),i._elements.$openButton.off("click").on("click",{uiw:i},i._handleOpenClick).button({text:!1,label:"Open Dialog",icons:{primary:"ui-icon-circle-triangle-n"}}),i._elements.$clearButton.button({text:!1,label:"Clear Contents",icons:{primary:"ui-icon-circle-close"}}).bind("click",{uiw:i},i._handleClearClick).parent().buttonset(),i._elements.$clearButton.removeClass("ui-corner-left"),i._elements.$displayInput.bind("apexrefresh",function(){i._refresh()}),i.options.enterable!==i._values.ENTERABLE_RESTRICTED&&i.options.enterable!==i._values.ENTERABLE_UNRESTRICTED||i._elements.$displayInput.bind("keypress",{uiw:i},i._handleEnterableKeypress).bind("blur",{uiw:i},i._handleEnterableBlur),i.options.dependingOnSelector&&e(i.options.dependingOnSelector).bind("change",function(){i._elements.$displayInput.trigger("apexrefresh")}),apex.widget.initPageItem(i._elements.$displayInput.attr("id"),{setValue:function(e,t){i._elements.$hiddenInput.val(e),i._elements.$displayInput.val(t),i._values.lastDisplayValue=t},getValue:function(){return i._elements.$hiddenInput.val()},show:function(){i.show()},hide:function(){i.hide()},enable:function(){i.enable()},disable:function(){i.disable()}})},_initBaseElements:function(){var n=this;n.options.debug&&t.info("Super LOV - Initialize Base Elements ("+n._values.apexItemId+")"),n._elements.$itemHolder=e("table#"+n._values.apexItemId+"_holder"),n._elements.$hiddenInput=e("#"+n._values.apexItemId+"_HIDDENVALUE"),n._elements.$displayInput=n.element,n._elements.$label=e('label[for="'+n._values.apexItemId+'"]'),n._elements.$fieldset=e("#"+n._values.controlsId),n._elements.$clearButton=e("#"+n._values.controlsId+" button.superlov-modal-delete"),n._elements.$openButton=e("#"+n._values.controlsId+" button.superlov-modal-open")},_initElements:function(){var n=this;n.options.debug&&t.info("Super LOV - Initialize Elements ("+n._values.apexItemId+")"),n._elements.$window=e(window),n._elements.$outerDialog=e("div.superlov-dialog"),n._elements.$dialog=e("div.superlov-container"),n._elements.$buttonContainer=e("div.superlov-button-container"),n._elements.$searchContainer=e("div.superlov-search-container"),n._elements.$paginationContainer=e("div.superlov-pagination-container"),n._elements.$columnSelect=e("select#superlov-column-select"),n._elements.$filter=e("input#superlov-filter"),n._elements.$searchButton=e("div.superlov-search-icon"),n._elements.$prevButton=e("button#superlov-prev-page"),n._elements.$paginationDisplay=e("span#superlov-pagination-display"),n._elements.$nextButton=e("button#superlov-next-page"),n._elements.$wrapper=e("div.superlov-table-wrapper"),n._elements.$actionlessFocus=e("#superlov-focusable")},_initTransientElements:function(){var n=this;n.options.debug&&t.info("Super LOV - Initialize Transient Elements ("+n._values.apexItemId+")"),n._elements.$table=e("table.superlov-table"),n._elements.$nodata=e("div.superlov-nodata"),n._elements.$moreRows=e("input#asl-super-lov-more-rows")},_initButtons:function(){var e=this;e.options.debug&&t.info("Super LOV - Initialize Buttons ("+e._values.apexItemId+")"),e._elements.$searchButton.bind("click",{uiw:e},e._handleSearchButtonClick),e._elements.$prevButton.button({text:!1,icons:{primary:"ui-icon-arrowthick-1-w"}}).bind("click",{uiw:e},e._handlePrevButtonClick),e._elements.$nextButton.button({text:!1,icons:{primary:"ui-icon-arrowthick-1-e"}}).bind("click",{uiw:e},e._handleNextButtonClick)},_initColumnSelect:function(){var n=this,a=n._elements.$columnSelect.get(0),l=1;n.options.debug&&t.info("Super LOV - Initialize Column Select ("+n._values.apexItemId+")");for(var s=0;s<n.options.reportHeaders.length;s++)!n._isHiddenCol(s+1)&&n._isSearchableCol(s+1)&&(a.options[l]=new Option(n.options.reportHeaders[s],s+1),l+=1);e('select#superlov-column-select option[value="'+n.options.displayColNum+'"]').attr("selected","selected")},_handleColumnChange:function(){var e=this;e.options.debug&&t.info("Super LOV - Handle Column Change ("+e._values.apexItemId+")"),e._elements.$columnSelect.val()?e._elements.$filter.removeAttr("disabled"):e._elements.$filter.val("").attr("disabled","disabled"),e._updateStyledFilter()},_ieNoSelectText:function(){var n=this;n.options.debug&&t.info("Super LOV - IE No Select Text ("+n._values.apexItemId+")"),document.attachEvent&&e("div.superlov-table-wrapper *").each(function(){e(this)[0].attachEvent("onselectstart",function(){return!1})})},_isHiddenCol:function(e){var n=this,a=!1;n.options.debug&&t.info("Super LOV - Is Hidden Column ("+n._values.apexItemId+")");for(var l=0;l<n._values.hiddenCols.length;l++)if(parseInt(e,10)===parseInt(n._values.hiddenCols[l],10)){a=!0;break}return a},_isSearchableCol:function(e){var n=this,a=!1;if(n.options.debug&&t.info("Super LOV - Is Searchable Column ("+n._values.apexItemId+")"),n._values.searchableCols.length){for(var l=0;l<n._values.searchableCols.length;l++)if(parseInt(e,10)===parseInt(n._values.searchableCols[l],10)){a=!0;break}}else a=!0;return a},_showDialog:function(){var n,a,l,s=this;s.options.debug&&t.info("Super LOV - Show Dialog ("+s._values.apexItemId+")"),l='<div id="'+s._values.apexItemId+'_superlov" class="superlov-container ui-widget utr-container">\n   <div class="superlov-button-container ui-widget-header ui-corner-all ui-helper-clearfix">\n      <div class="superlov-search-container">\n         <table>\n            <tr>\n               <td valign="middle">\n                  Search<a id="superlov-focusable" href="#" style="text-decoration: none;">&nbsp;</a>\n               </td>\n               <td valign="middle">\n                  <select id="superlov-column-select" size="1">\n                     <option value="">- Select Column -</option>\n                  </select>\n               </td>\n               <td>\n                  <div id="superlov_styled_filter" class="ui-corner-all">\n                     <table>\n                        <tbody>\n                           <tr>\n                              <td>\n                                 <input type="text" id="superlov-filter" class="ui-corner-all"/>\n                              </td>\n                              <td>\n                                 <div class="ui-state-highlight superlov-search-icon"><span class="ui-icon ui-icon-circle-zoomin"></span></div>\n                              </td>\n                           </tr>\n                        </tbody>\n                     </table>\n                  </div>\n               </td>\n            </tr>\n         </table>\n      </div>\n      <div class="superlov-pagination-container">\n         <table>\n            <tr>\n               <td valign="middle">\n                  <button id="superlov-prev-page">Previous Page</button>\n               </td>\n               <td valign="middle">\n                  <span id="superlov-pagination-display">Page 1</span>\n               </td>\n               <td valign="middle">\n                  <button id="superlov-next-page">Next Page</button>\n               </td>\n            </tr>\n         </table>\n      </div>\n   </div>\n      <div class="superlov-table-wrapper">\n         <img id="superlov-loading-image" src="'+s.options.loadingImageSrc+'">\n   </div>\n</div>\n',e("body").append(l),s._initElements(),s._values.pagination="1:"+s.options.maxRowsPerPage,s._values.curPage=1,s._initButtons(),s._elements.$filter.bind("focus",{uiw:s},s._handleFilterFocus);var o=s._elements.$filter.css("border-top-color"),i=s._elements.$filter.css("border-top-width"),r=s._elements.$filter.css("border-top-style"),u=s._elements.$filter.css("background-color"),d=s._elements.$filter.css("background-image"),p=s._elements.$filter.css("background-repeat"),_=s._elements.$filter.css("background-attachment"),c=s._elements.$filter.css("background-position");s._elements.$filter.css("border","none"),e("#superlov_styled_filter").css({"border-color":o,"border-width":i,"border-style":r,"background-color":u,"background-image":d,"background-repeat":p,"background-attachment":_,"background-position":c}),s._disableSearchButton(),s._disablePrevButton(),s._disableNextButton(),n=s._elements.$searchContainer.width()+s._elements.$paginationContainer.width(),s._elements.$buttonContainer.css("width",n+10+"px"),a=s._elements.$buttonContainer.height(),s._elements.$paginationContainer.css("height",a+"px"),s._elements.$searchContainer.css("height",a+"px"),s._elements.$dialog.dialog({disabled:!1,autoOpen:!1,closeOnEscape:!0,closeText:"Close",dialogClass:"superlov-dialog",draggable:!0,height:"auto",hide:null,maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:!1,modal:!0,resizable:!1,show:null,stack:!0,title:s.options.dialogTitle,open:function(){s._elements.$filter.trigger("focus"),"DIALOG"===s._values.fetchLovMode?s._fetchLov():"ENTERABLE"===s._values.fetchLovMode&&s._elements.$filter.val(s._values.searchString),s._values.fetchLovMode="DIALOG"},close:function(){e("body").unbind("keydown",s._handleBodyKeydown),e(document).unbind("keydown",s._disableArrowKeyScrolling),e(document).off("mouseenter","table.superlov-table tbody tr").off("mouseleave","table.superlov-table tbody tr").off("click","table.superlov-table tbody tr"),s._values.active=!1,s._values.fetchLovInProcess=!1,e(this).dialog("destroy").remove(),s._elements.$dialog.remove(),"BUTTON"===s._values.focusOnClose?s._elements.$openButton.focus():"INPUT"===s._values.focusOnClose&&s._elements.$displayInput.focus(),""===s._elements.$displayInput.val()&&(s.allowChangePropagation(),s._elements.$hiddenInput.trigger("change"),s._elements.$displayInput.trigger("change"),s.preventChangePropagation()),s._values.focusOnClose="BUTTON"}}),s._initElements(),s._elements.$dialog.css("overflow","hidden"),s._elements.$outerDialog.css("min-width",n+42+"px"),s._values.dialogTop=.05*s._elements.$window.height(),s._values.dialogLeft=s._elements.$window.width()/2-s._elements.$outerDialog.outerWidth(!0)/2,s._values.dialogLeft<0&&(s._values.dialogLeft=0),s._elements.$dialog.dialog().dialog("option","position",[s._values.dialogLeft,s._values.dialogTop]),s._ieNoSelectText(),e("body").bind("keydown",{uiw:s},s._handleBodyKeydown),e(document).bind("keydown",{uiw:s},s._disableArrowKeyScrolling),e(document).on("mouseenter","table.superlov-table tbody tr",{uiw:s},s._handleMainTrMouseenter).on("mouseleave","table.superlov-table tbody tr",{uiw:s},s._handleMainTrMouseleave).on("click","table.superlov-table tbody tr",{uiw:s},s._handleMainTrClick),s._elements.$window.bind("resize",{uiw:s},s._handleWindowResize),s._elements.$dialog.dialog("open"),s._initColumnSelect(),s._elements.$columnSelect.bind("change",function(){s._handleColumnChange()})},_handleWindowResize:function(e){var n,a=e.data.uiw;a.options.debug&&t.info("Super LOV - Handle Window Resize ("+a._values.apexItemId+")"),a._elements.$table.length||a._elements.$nodata.length||a._initTransientElements(),a._updateLovMeasurements(),a._elements.$outerDialog.css({height:a._values.dialogHeight,width:a._values.dialogWidth}),a._elements.$wrapper.css({height:a._values.wrapperHeight,width:a._values.wrapperWidth,overflow:"hidden"}),n=a._elements.$window.width()/2-a._elements.$outerDialog.outerWidth(!0)/2,n<0&&(n=0),a._elements.$outerDialog.css({top:a._values.dialogTop,left:n}),a._elements.$wrapper.css("overflow","auto")},_handleBodyKeydown:function(n){var a,l,s,o,i=n.data.uiw;if(i.options.debug&&t.info("Super LOV - Handle Body Keydown ("+i._values.apexItemId+")"),37!==n.which||i._elements.$prevButton.attr("disabled"))if(39!==n.which||i._elements.$nextButton.attr("disabled")){if(38===n.which&&n.target!=i._elements.$columnSelect[0])i._values.bodyKeyMode="ROWSELECT",i._elements.$actionlessFocus.trigger("focus"),a=i._elements.$table.find("tbody>tr").has("td.ui-state-hover"),l=0===a.length?i._elements.$table.find("tbody>tr:last"):a.get(0)===i._elements.$table.find("tbody>tr:first").get(0)?i._elements.$table.find("tbody>tr:last"):a.prev(),a.trigger("mouseout"),l.trigger("mouseover").focus(),s=l.position().top-i._elements.$wrapper.position().top,o={top:0,bottom:i._elements.$wrapper.outerHeight(!0)},l[0]===i._elements.$table.find("tbody>tr:first")[0]?i._elements.$wrapper.scrollTop(0):s<o.top?i._elements.$wrapper.scrollTop(i._elements.$wrapper.scrollTop()+s-5):s+l.height()>o.bottom&&i._elements.$wrapper.scrollTop(i._elements.$wrapper.scrollTop()+s+l.height()-o.bottom+5);else if(40===n.which&&n.target!=i._elements.$columnSelect[0])i._values.bodyKeyMode="ROWSELECT",i._elements.$actionlessFocus.trigger("focus"),a=i._elements.$table.find("tbody>tr").has("td.ui-state-hover"),l=0===a.length?i._elements.$table.find("tbody>tr:first"):a.get(0)===i._elements.$table.find("tbody>tr:last").get(0)?i._elements.$table.find("tbody>tr:first"):a.next(),a.trigger("mouseout"),l.trigger("mouseover").focus(),s=l.position().top-i._elements.$wrapper.position().top,o={top:0,bottom:i._elements.$wrapper.outerHeight(!0)},l[0]===i._elements.$table.find("tbody>tr:first")[0]?i._elements.$wrapper.scrollTop(0):s<o.top?i._elements.$wrapper.scrollTop(i._elements.$wrapper.scrollTop()+s-5):s+l.height()>o.bottom&&i._elements.$wrapper.scrollTop(i._elements.$wrapper.scrollTop()+s+l.height()-o.bottom+5);else if(13===n.which){if("ROWSELECT"===i._values.bodyKeyMode&&n.target!=i._elements.$columnSelect[0]&&n.target!=i._elements.$prevButton[0]&&n.target!=i._elements.$nextButton[0]&&n.target!=i._elements.$searchButton[0])return e("#superlov-fetch-results>tbody>tr").has("td.ui-state-hover").trigger("click"),n.preventDefault(),!1;"SEARCH"===i._values.bodyKeyMode&&n.target!=i._elements.$displayInput[0]&&n.target!=i._elements.$columnSelect[0]&&n.target!=i._elements.$prevButton[0]&&n.target!=i._elements.$nextButton[0]&&n.target!=i._elements.$searchButton[0]&&i._search()}}else"ROWSELECT"===i._values.bodyKeyMode&&i._handleNextButtonClick(n);else"ROWSELECT"===i._values.bodyKeyMode&&i._handlePrevButtonClick(n)},_handleOpenClick:function(e){var n=e.data.uiw;return n._values.active||(n._values.active=!0,n.options.debug&&t.info("Super LOV - Handle Open Click"),n._values.fetchLovMode="DIALOG",n._values.searchString="",n._showDialog()),!1},_handleEnterableKeypress:function(e){var t=e.data.uiw;13===e.which&&t._elements.$displayInput.val()!==t._values.lastDisplayValue&&(t._values.focusOnClose="INPUT",t._elements.$displayInput.trigger("blur"))},_handleEnterableBlur:function(e){var t=e.data.uiw;t._elements.$displayInput.val()!==t._values.lastDisplayValue&&(t._values.lastDisplayValue=t._elements.$displayInput.val(),t._handleEnterableChange())},_handleEnterableChange:function(){for(var e=this,t=0;t<e._values.mapToItems.length;t++)$s(e._values.mapToItems[t],"");e.options.enterable===e._values.ENTERABLE_RESTRICTED?e._elements.$displayInput.val()?(e._values.fetchLovMode="ENTERABLE",e._fetchLov()):e._elements.$hiddenInput.val(""):e.options.enterable===e._values.ENTERABLE_UNRESTRICTED&&e._elements.$hiddenInput.val(e._elements.$displayInput.val())},_fetchLov:function(){var a,l,s,o=this,i=0;o.options.debug&&t.info("Super LOV - Fetch LOV ("+o._values.apexItemId+")"),o._values.fetchLovInProcess||(o._values.fetchLovInProcess=!0,"DIALOG"===o._values.fetchLovMode?(s=!0,i=Math.floor(10000000001*Math.random()),o._elements.$wrapper.data("fetchLovId",i),o._disableSearchButton(),o._disablePrevButton(),o._disableNextButton(),o._elements.$window.unbind("resize",o._handleWindowResize),o._elements.$columnSelect.val()&&o._elements.$filter.val()?(a=o._elements.$columnSelect.val(),o._values.searchString=o._elements.$filter.val()):o._values.searchString=""):"ENTERABLE"===o._values.fetchLovMode&&(s=!1,o._elements.$fieldset.after('<span class="loading-indicator superlov-loading"></span>'),o._values.pagination="1:"+o.options.maxRowsPerPage,a=o.options.displayColNum,o._values.searchString=o._elements.$displayInput.val()),l={x01:"FETCH_LOV",x02:o._values.pagination,x03:a,x04:o._values.searchString,x05:i,p_arg_names:[],p_arg_values:[]},e(o.options.dependingOnSelector).add(o.options.pageItemsToSubmit).each(function(e){l.p_arg_names[e]=this.id,l.p_arg_values[e]=$v(this)}),n.plugin(o.options.ajaxIdentifier,l,{dataType:"text",async:s,success:function(e){o._values.ajaxReturn=e,o._handleFetchLovReturn()}}))},_handleFetchLovReturn:function(){var n,a,l=this,s=e(l._values.ajaxReturn);if(l.options.debug&&t.info("Super LOV - Handle Fetch LOV Return ("+l._values.apexItemId+")"),"DIALOG"===l._values.fetchLovMode&&Number(e(l._values.ajaxReturn).data("fetch-lov-id"))!==l._elements.$wrapper.data("fetchLovId"))return l.options.debug&&t.info("...Ajax return mismatch - exiting early"),void l._elements.$dialog.css("height","auto");if(a=s.find("tr").length-1,"ENTERABLE"===l._values.fetchLovMode){if(l._elements.$fieldset.next("span.loading-indicator").remove(),1===a)return l.options.debug&&t.info("...Found exact match, setting display and return inputs"),l._values.fetchLovInProcess=!1,l._elements.$selectedRow=s.find("tr:eq(1)"),void l._setValuesFromRow();l.options.debug&&t.info("...Exact match not found, opening dialog"),l._elements.$hiddenInput.val(""),l._elements.$displayInput.val(""),l._values.lastDisplayValue="",l._showDialog()}l._elements.$wrapper.fadeTo(0,0).css({width:"100000px",height:"0px",overflow:"hidden"}).empty(),0===a?(n='<div class="ui-widget superlov-nodata">\n   <div class="ui-state-highlight ui-corner-all" style="padding: 0pt 0.7em;">\n      <p>\n      <span class="ui-icon ui-icon-alert" style="float: left; margin-right:0.3em;"></span>\n      '+l.options.noDataFoundMsg+"\n      </p>\n   </div>\n</div>\n",l._elements.$wrapper.html(n)):(l._elements.$wrapper.html(l._values.ajaxReturn),e("table.superlov-table th:first").addClass("ui-corner-tl"),e("table.superlov-table th:last").addClass("ui-corner-tr"),e("table.superlov-table tr:last td:first").addClass("ui-corner-bl"),e("table.superlov-table tr:last td:last").addClass("ui-corner-br")),l._ieNoSelectText(),l._initTransientElements(),l._values.moreRows="Y"===l._elements.$moreRows.val(),l._highlightSelectedRow(),l._updatePaginationDisplay(),l._enableSearchButton(),l._values.moreRows?l._enableNextButton():l._disableNextButton(),l._elements.$table.length?(t.info("wrapper width: "+l._elements.$wrapper.width()),t.info("table width: "+l._elements.$table.width()),l._elements.$table.width(l._elements.$table.width())):l._elements.$nodata.length&&l._elements.$nodata.width(l._elements.$nodata.width()),l._resizeModal(),l._values.fetchLovInProcess=!1,l._elements.$dialog.css("height","auto")},_resizeModal:function(){var e=this;e.options.debug&&t.info("Super LOV - Resize Modal ("+e._values.apexItemId+")"),e._updateLovMeasurements(),e._elements.$dialog.css("height","auto"),0===e.options.effectsSpeed?(e._elements.$outerDialog.css({height:e._values.dialogHeight,width:e._values.dialogWidth,left:e._values.dialogLeft}),e._elements.$nodata.length&&e._elements.$nodata.width(e._values.wrapperWidth),e._elements.$wrapper.css({height:e._values.wrapperHeight,width:e._values.wrapperWidth,overflow:"auto"}).fadeTo(e.options.effectsSpeed,1),e._elements.$window.bind("resize",{uiw:e},e._handleWindowResize)):e._elements.$outerDialog.animate({height:e._values.dialogHeight},e.options.effectsSpeed,function(){e._elements.$outerDialog.animate({width:e._values.dialogWidth,left:e._values.dialogLeft},e.options.effectsSpeed,function(){e._elements.$nodata.length&&e._elements.$nodata.width(e._values.wrapperWidth),e._elements.$wrapper.css({height:e._values.wrapperHeight,width:e._values.wrapperWidth,overflow:"auto"}).fadeTo(e.options.effectsSpeed,1),e._elements.$window.bind("resize",{uiw:e},e._handleWindowResize)})})},_search:function(){var e=this;e.options.debug&&t.info("Super LOV - Search ("+e._values.apexItemId+")"),e._values.curPage=1,e._values.pagination="1:"+e.options.maxRowsPerPage,""===e._elements.$filter.val()&&(e._elements.$columnSelect.val(""),e._handleColumnChange()),e._disablePrevButton(),e._values.fetchLovMode="DIALOG",e._fetchLov()},_updatePaginationDisplay:function(){var e=this;e.options.debug&&t.info("Super LOV - Update Pagination Display ("+e._values.apexItemId+")"),e._elements.$paginationDisplay.html("Page "+e._values.curPage)},_disableSearchButton:function(){var e=this;e.options.debug&&t.info("Super LOV - Disable Search Button ("+e._values.apexItemId+")"),e._disableButton("search")},_disablePrevButton:function(){var e=this;e.options.debug&&t.info("Super LOV - Disable Prev Button ("+e._values.apexItemId+")"),e._disableButton("prev")},_disableNextButton:function(){var e=this;e.options.debug&&t.info("Super LOV - Disable Next Button ("+e._values.apexItemId+")"),e._disableButton("next")},_disableButton:function(e){var n,a=this;return a.options.debug&&t.info("Super LOV - Disable Button ("+a._values.apexItemId+")"),"search"==e?(n=a._elements.$searchButton,void n.attr("disabled","disabled").removeClass("ui-state-hover").removeClass("ui-state-focus").css("cursor","default")):("prev"==e?n=a._elements.$prevButton:"next"==e&&(n=a._elements.$nextButton),void n.attr("disabled","disabled").removeClass("ui-state-hover").removeClass("ui-state-focus").css({opacity:"0.5",cursor:"default"}))},_enableSearchButton:function(){var e=this;e.options.debug&&t.info("Super LOV - Enable Search Button ("+e._values.apexItemId+")"),e._enableButton("search")},_enablePrevButton:function(){var e=this;e.options.debug&&t.info("Super LOV - Enable Prev Button ("+e._values.apexItemId+")"),e._enableButton("prev")},_enableNextButton:function(){var e=this;e.options.debug&&t.info("Super LOV - Enable Next Button ("+e._values.apexItemId+")"),e._enableButton("next")},_enableButton:function(e){var n,a=this;return a.options.debug&&t.info("Super LOV - Enable Button ("+a._values.apexItemId+")"),"search"==e?(n=a._elements.$searchButton,void n.removeAttr("disabled").css("cursor","pointer")):("prev"==e?n=a._elements.$prevButton:"next"==e&&(n=a._elements.$nextButton),void n.removeAttr("disabled").css({opacity:"1",cursor:"pointer"}))},_highlightSelectedRow:function(){var n=this,a=e('table.superlov-table tbody tr[data-return="'+n._elements.$hiddenInput.val()+'"]');n.options.debug&&t.info("Super LOV - Highlight Selected Row ("+n._values.apexItemId+")"),a.children("td").removeClass("ui-state-default").addClass("ui-state-active")},_handleMainTrMouseenter:function(n){var a=n.data.uiw,l=e(n.currentTarget),s=a._elements.$table.find("tbody>tr").has("td.ui-state-hover");a.options.debug&&t.info("Super LOV: _handleMainTrMouseenter ("+a._values.apexItemId+")"),s.length&&(s.children("td.ui-state-hover-active").length?s.children("td").removeClass("ui-state-hover ui-state-hover-active").addClass("ui-state-active"):s.children("td").removeClass("ui-state-hover").addClass("ui-state-default")),l.children("td:not(.ui-state-active)").length?l.children("td").removeClass("ui-state-default").addClass("ui-state-hover"):l.children("td").removeClass("ui-state-active").addClass("ui-state-hover ui-state-hover-active")},_handleMainTrMouseleave:function(n){var a=n.data.uiw,l=e(n.currentTarget);a.options.debug&&t.info("Super LOV: _handleMainTrMouseleave ("+a._values.apexItemId+")"),l.children("td.ui-state-hover-active").length?l.children("td").removeClass("ui-state-hover ui-state-hover-active").addClass("ui-state-active"):l.children("td").removeClass("ui-state-hover").addClass("ui-state-default")},_handleMainTrClick:function(t){var n=t.data.uiw;n._elements.$selectedRow=e(t.currentTarget),n._setValuesFromRow()},_setValuesFromRow:function(){var n,a=this,l=a._elements.$selectedRow.data("return"),s=a._elements.$selectedRow.data("display");a.options.debug&&(t.info("Super LOV - Set values from row ("+a._values.apexItemId+")"),t.info('...returnVal: "'+l+'"'),t.info('...displayVal: "'+s+'"')),n=a._elements.$hiddenInput.val()!==l,a.options.debug&&t.info('...valChanged: "'+n+'"'),a._elements.$hiddenInput.val(l),a._elements.$displayInput.val(s),a._values.lastDisplayValue=s;for(var o=0;o<a._values.mapToItems.length;o++)a._isHiddenCol(a._values.mapFromCols[o])?$s(a._values.mapToItems[o],a._elements.$selectedRow.data("col"+a._values.mapFromCols[o]+"-value")):$s(a._values.mapToItems[o],a._elements.$selectedRow.children("td.asl-col"+a._values.mapFromCols[o]).text());if("DIALOG"===a._values.fetchLovMode){a.options.debug&&t.info("...In dialog mode; close dialog");var i=e("div.superlov-container").data("ui-dialog");i&&i.close()}n&&(a.allowChangePropagation(),a._elements.$hiddenInput.trigger("change"),a._elements.$displayInput.trigger("change"),a.preventChangePropagation())},_handleSearchButtonClick:function(e){var n=e.data.uiw;n.options.debug&&t.info("Super LOV - Handle Search Button Click ("+n._values.apexItemId+")"),n._search()},_handlePrevButtonClick:function(e){var n,a,l=e.data.uiw;l.options.debug&&t.info("Super LOV - Handle Prev Button Click ("+l._values.apexItemId+")"),l._values.fetchLovMode="DIALOG",l._values.curPage=l._values.curPage-1,1===l._values.curPage?(n=1,a=l.options.maxRowsPerPage,l._values.pagination=n+":"+a,l._fetchLov(),l._disablePrevButton()):(n=(l._values.curPage-1)*l.options.maxRowsPerPage+1,a=l._values.curPage*l.options.maxRowsPerPage,l._values.pagination=n+":"+a,l._fetchLov(),l._enablePrevButton())},_handleNextButtonClick:function(e){var n,a,l=e.data.uiw;l.options.debug&&t.info("Super LOV - Handle Next Button Click ("+l._values.apexItemId+")"),l._values.fetchLovMode="DIALOG",l._values.curPage=l._values.curPage+1,n=(l._values.curPage-1)*l.options.maxRowsPerPage+1,a=l._values.curPage*l.options.maxRowsPerPage,l._values.pagination=n+":"+a,l._fetchLov(),l._elements.$paginationDisplay.html("Page "+l._values.curPage),l._values.curPage>=2&&l._elements.$prevButton.attr("disabled")&&l._enablePrevButton()},_refresh:function(){var e=this,n=e._elements.$hiddenInput.val();e.options.debug&&t.info("Super LOV - Refresh ("+e._values.apexItemId+")"),e._elements.$displayInput.trigger("apexbeforerefresh"),e._elements.$hiddenInput.val(""),e._elements.$displayInput.val(""),e._values.lastDisplayValue="";for(var a=0;a<e._values.mapToItems.length;a++)$s(e._values.mapToItems[a],"");return e._elements.$displayInput.trigger("apexafterrefresh"),n!==e._elements.$hiddenInput.val()&&(e.allowChangePropagation(),e._elements.$hiddenInput.trigger("change"),e._elements.$displayInput.trigger("change"),e.preventChangePropagation()),!1},_updateLovMeasurements:function(){var n,a,l,s,o,i,r,u,d,p,_,c,m=this,v=25,h=!1,g=!1,b=!0;m.options.debug&&t.info("Super LOV - Update LOV Measurements ("+m._values.apexItemId+")"),m._elements.$nodata.length?(b=!1,n=m._elements.$nodata):n=m._elements.$table,a=e("div.superlov-dialog div.ui-dialog-titlebar").outerHeight(!0)+m._elements.$buttonContainer.outerHeight(!0)+e("div.superlov-dialog div.ui-dialog-buttonpane").outerHeight(!0)+(m._elements.$dialog.outerHeight(!0)-m._elements.$dialog.height())+(m._elements.$wrapper.outerHeight(!0)-m._elements.$wrapper.height()),l=m._elements.$outerDialog.css("max-height"),m._values.percentRegExp.test(l)?(l=parseFloat(l),l=m._elements.$window.height()*(l/100)):l=m._values.pixelRegExp.test(l)?parseFloat(l):.9*m._elements.$window.height(),l=.9*m._elements.$window.height(),o=m._elements.$dialog.outerWidth(!0)-m._elements.$dialog.width(),i=m._elements.$outerDialog.css("min-width"),m._values.percentRegExp.test(i)?(i=parseFloat(i),i=m._elements.$window.width()*(i/100)):i=m._values.pixelRegExp.test(i)?parseFloat(i):m._elements.$buttonContainer.outerWidth(!0),r=m._elements.$outerDialog.css("max-width"),m._values.percentRegExp.test(r)?(r=parseFloat(r),r=m._elements.$window.width()*(r/100)):r=m._values.pixelRegExp.test(r)?parseFloat(r):.9*m._elements.$window.width(),r=.9*m._elements.$window.width(),a+n.outerHeight(!0)>l?(h=!0,s=l-a):s=n.outerHeight(!0),b?(u=n.outerWidth(!0),h&&(u+=v),o+u<i?u=i-o:o+u>r&&(g=!0,u=r-o,u<i&&(u=i-o)),g&&!h&&(a+n.outerHeight(!0)+v>l?(h=!0,s=l-a):s=n.outerHeight(!0)+v)):u=i-o,p=a+s,d=o+u,m._values.wrapperHeight=s,m._values.wrapperWidth=u,m._values.dialogHeight=p,m._values.dialogWidth=d,_=(m._values.dialogWidth-m._elements.$outerDialog.width())/2,c=m._elements.$outerDialog.css("left"),m._values.percentRegExp.test(c)?(c=parseFloat(c),c=m._elements.$window.width()*(c/100)):c=m._values.pixelRegExp.test(c)?parseFloat(c):0,c-=_,c<0&&(c=0),m._values.dialogLeft=c,m._values.dialogTop=.05*m._elements.$window.height()+e(document).scrollTop()},_updateStyledFilter:function(){var n=this,a=n._elements.$filter.css("background-color"),l=n._elements.$filter.css("background-image"),s=n._elements.$filter.css("background-repeat"),o=n._elements.$filter.css("background-attachment"),i=n._elements.$filter.css("background-position");n.options.debug&&t.info("Super LOV - Update Styled Filter ("+n._values.apexItemId+")"),e("#superlov_styled_filter").css({"background-color":a,"background-image":l,"background-repeat":s,"background-attachment":o,"background-position":i})},_updateStyledInput:function(){var e=this,n=e._elements.$displayInput.css("background-color"),a=e._elements.$displayInput.css("background-image"),l=e._elements.$displayInput.css("background-repeat"),s=e._elements.$displayInput.css("background-attachment"),o=e._elements.$displayInput.css("background-position");e.options.debug&&t.info("Super LOV - Update Styled Input ("+e._values.apexItemId+")"),e._elements.$fieldset.css({"background-color":n,"background-image":a,"background-repeat":l,"background-attachment":s,"background-position":o
})},_handleClearClick:function(e){var n=e.data.uiw,a=n._elements.$clearButton.find("span.ui-icon");n.options.debug&&t.info("Super LOV - Clear LOV ("+n._values.apexItemId+")"),0!==e.screenX&&0!==e.screenY&&e.target.blur(),""!==n._elements.$displayInput.val()&&("N"===n.options.useClearProtection?n._refresh():a.hasClass("ui-icon-circle-close")?(a.removeClass("ui-icon-circle-close").addClass("ui-icon-alert"),n._values.deleteIconTimeout=setTimeout("apex.jQuery('#"+n._values.controlsId+" button>span.ui-icon-alert').removeClass('ui-icon-alert').addClass('ui-icon-circle-close');",1e3)):(clearTimeout(n._values.deleteIconTimeout),n._values.deleteIconTimeout="",n._refresh(),a.removeClass("ui-icon-alert").addClass("ui-icon-circle-close")))},_disableArrowKeyScrolling:function(e){var t=e.data.uiw,n=e.which;if(n===a.keyCode.LEFT||n===a.keyCode.RIGHT){if("ROWSELECT"===t._values.bodyKeyMode)return e.preventDefault(),!1}else if(n===a.keyCode.UP||n===a.keyCode.DOWN)return e.preventDefault(),!1;return!0},_handleFilterFocus:function(e){var t=e.data.uiw;t._values.bodyKeyMode="SEARCH"},disable:function(){var e=this;e.options.debug&&t.info("Super LOV - Disabling Item ("+e._values.apexItemId+")"),e._values.disabled===!1&&(e.options.enterable!==e._values.ENTERABLE_RESTRICTED&&e.options.enterable!==e._values.ENTERABLE_UNRESTRICTED||e._elements.$displayInput.attr("disabled","disabled").unbind("keypress",e._handleEnterableKeypress).unbind("blur",{uiw:e},e._handleEnterableBlur),e._elements.$hiddenInput.attr("disabled","disabled"),e._elements.$openButton.unbind("click",e._handleOpenClick),e._elements.$clearButton.unbind("click",e._handleClearClick),e._elements.$itemHolder.find("div.superlov-control-buttons").buttonset("disable")),e._values.disabled=!0,e._elements.$label.parent().addClass("apex_disabled"),e._elements.$fieldset.parent().addClass("apex_disabled")},enable:function(){var e=this;e.options.debug&&t.info("Super LOV - Enabling Item ("+e._values.apexItemId+")"),e._values.disabled===!0&&(e.options.enterable!==e._values.ENTERABLE_RESTRICTED&&e.options.enterable!==e._values.ENTERABLE_UNRESTRICTED||e._elements.$displayInput.removeAttr("disabled").bind("keypress",{uiw:e},e._handleEnterableKeypress).bind("blur",{uiw:e},e._handleEnterableBlur),e._elements.$hiddenInput.removeAttr("disabled"),e._elements.$openButton.bind("click",{uiw:e},e._handleOpenClick),e._elements.$clearButton.bind("click",{uiw:e},e._handleClearClick),e._elements.$itemHolder.find("div.superlov-control-buttons").buttonset("enable")),e._values.disabled=!1,e._elements.$label.parent().removeClass("apex_disabled"),e._elements.$fieldset.parent().removeClass("apex_disabled")},hide:function(){var e=this;e.options.debug&&t.info("Super LOV - Hiding Item ("+e._values.apexItemId+")"),e._elements.$fieldset.hide(),e._elements.$label.hide()},show:function(){var e=this;e.options.debug&&t.info("Super LOV - Showing Item ("+e._values.apexItemId+")"),e._elements.$fieldset.show(),e._elements.$label.show()},hideRow:function(){var e=this;e.options.debug&&t.info("Super LOV - Hiding Row ("+e._values.apexItemId+")"),"td"===e._elements.$label.parent().prop("tagName").toLowerCase()?e._elements.$label.closest("tr").hide():(e._elements.$fieldset.closest(".apex_row").hide(),e._elements.$fieldset.closest(".fieldContainer").hide())},showRow:function(){var e=this;e.options.debug&&t.info("Super LOV - Showing Row ("+e._values.apexItemId+")"),"td"===e._elements.$label.parent().prop("tagName").toLowerCase()?e._elements.$label.closest("tr").show():(e._elements.$fieldset.closest(".apex_row").show(),e._elements.$fieldset.closest(".fieldContainer").show())},allowChangePropagation:function(){var e=this;e._values.changePropagationAllowed=!0},preventChangePropagation:function(){var e=this;e._values.changePropagationAllowed=!1},changePropagationAllowed:function(){var e=this;return e._values.changePropagationAllowed},getValuesByReturn:function(n){var a=this;return a.options.debug&&t.info("Super LOV - Getting Values by Return Value ("+a._values.apexItemId+")"),queryString={p_flow_id:"#pFlowId".val(),p_flow_step_id:"#pFlowStepId".val(),p_instance:"#pInstance".val(),p_request:"PLUGIN="+a.options.ajaxIdentifier,x01:"GET_VALUES_BY_RETURN",x06:n},e.ajax({type:"POST",url:"wwv_flow.show",data:queryString,dataType:"json",async:!1,success:function(e){a.options.debug&&t.info(e),a._values.ajaxReturn=e}}),a._values.ajaxReturn},setValuesByReturn:function(e){var t,n=this;if(t=n.getValuesByReturn(e),void 0!==t.error){n._elements.$fieldset.hasClass("super-lov-not-enterable")||n._elements.$fieldset.hasClass("super-lov-enterable-restricted")?(n._elements.$hiddenInput.val(""),n._elements.$displayInput.val(""),n._values.lastDisplayValue=""):n._elements.$fieldset.hasClass("super-lov-enterable-unrestricted")&&(n._elements.$hiddenInput.val(e),n._elements.$displayInput.val(e),n._values.lastDisplayValue=e);for(var a=0;a<n._values.mapToItems.length;a++)$s(n._values.mapToItems[a],"")}else if(t.matchFound){if(n._elements.$hiddenInput.val(t.returnVal),n._elements.$displayInput.val(t.displayVal),n._values.lastDisplayValue=t.displayVal,t.mappedColumns)for(var a=0;a<t.mappedColumns.length;a++)$s(t.mappedColumns[a].mapItem,t.mappedColumns[a].mapVal)}else{n._elements.$fieldset.hasClass("super-lov-not-enterable")||n._elements.$fieldset.hasClass("super-lov-enterable-restricted")?(n._elements.$hiddenInput.val(""),n._elements.$displayInput.val(""),n._values.lastDisplayValue=""):n._elements.$fieldset.hasClass("super-lov-enterable-unrestricted")&&(n._elements.$hiddenInput.val(e),n._elements.$displayInput.val(e),n._values.lastDisplayValue=e);for(var a=0;a<n._values.mapToItems.length;a++)$s(n._values.mapToItems[a],"")}}})}(apex.jQuery,apex.debug,apex.server,apex.jQuery.ui);
//# sourceMappingURL=maps/apex-super-lov.min.js.map
