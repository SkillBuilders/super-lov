!function(e){e.widget("ui.apex_super_lov",{options:{enterable:null,returnColNum:null,displayColNum:null,hiddenCols:null,searchableCols:null,mapFromCols:null,mapToItems:null,maxRowsPerPage:null,dialogTitle:null,useClearProtection:null,noDataFoundMsg:null,loadingImageSrc:null,ajaxIdentifier:null,reportHeaders:null,effectsSpeed:null,dependingOnSelector:null,pageItemsToSubmit:null,debug:0!==e("#pdebug").length},_createPrivateStorage:function(){var t=this;if(t.options.debug&&apex.debug("Super LOV - Create Private Storage ("+e(t.element).attr("id")+")"),t._values={apexItemId:"",controlsId:"",deleteIconTimeout:"",searchString:"",pagination:"",fetchLovInProcess:!1,fetchLovMode:"",active:!1,ajaxReturn:"",curPage:"",moreRows:!1,wrapperHeight:0,dialogHeight:0,dialogWidth:0,dialogTop:0,dialogLeft:0,percentRegExp:/^-?[0-9]+\.?[0-9]*%$/,pixelRegExp:/^-?[0-9]+\.?[0-9]*px$/i,hiddenCols:t.options.hiddenCols?t.options.hiddenCols.split(","):[],searchableCols:t.options.searchableCols?t.options.searchableCols.split(","):[],mapFromCols:t.options.mapFromCols?t.options.mapFromCols.split(","):[],mapToItems:t.options.mapToItems?t.options.mapToItems.split(","):[],bodyKeyMode:"SEARCH",disabled:!1,focusOnClose:"BUTTON",ENTERABLE_RESTRICTED:"ENTERABLE_RESTRICTED",ENTERABLE_UNRESTRICTED:"ENTERABLE_UNRESTRICTED",lastDisplayValue:"",changePropagationAllowed:!1},t.options.debug){apex.debug("...Private Values");for(name in t._values)apex.debug("......"+name+': "'+t._values[name]+'"')}if(t._elements={$itemHolder:{},$window:{},$hiddenInput:{},$displayInput:{},$label:{},$fieldset:{},$clearButton:{},$openButton:{},$outerDialog:{},$dialog:{},$buttonContainer:{},$searchContainer:{},$paginationContainer:{},$columnSelect:{},$filter:{},$goButton:{},$prevButton:{},$paginationDisplay:{},$nextButton:{},$wrapper:{},$table:{},$nodata:{},$moreRows:{},$selectedRow:{},$actionlessFocus:{}},t.options.debug){apex.debug("...Cashed Elements");for(name in t._elements)apex.debug("......"+name+': "'+t._elements[name]+'"')}},_create:function(){var t=this;if(t.options.debug){apex.debug("Super LOV - Initialize ("+e(t.element).attr("id")+")"),apex.debug("...Options");for(name in t.options)apex.debug("......"+name+': "'+t.options[name]+'"')}t._createPrivateStorage(),t._values.apexItemId=e(t.element).attr("id"),t._values.controlsId=t._values.apexItemId+"_fieldset",t._initBaseElements(),t._values.lastDisplayValue=t._elements.$displayInput.val(),t._elements.$openButton.off("click").on("click",{uiw:t},t._handleOpenClick).button({text:!1,label:"Open Dialog",icons:{primary:"ui-icon-circle-triangle-n"}}),t._elements.$clearButton.button({text:!1,label:"Clear Contents",icons:{primary:"ui-icon-circle-close"}}).bind("click",{uiw:t},t._handleClearClick).parent().buttonset(),t._elements.$clearButton.removeClass("ui-corner-left"),t._elements.$displayInput.bind("apexrefresh",function(){t._refresh()}),t.options.enterable!==t._values.ENTERABLE_RESTRICTED&&t.options.enterable!==t._values.ENTERABLE_UNRESTRICTED||t._elements.$displayInput.bind("keypress",{uiw:t},t._handleEnterableKeypress).bind("blur",{uiw:t},t._handleEnterableBlur),t.options.dependingOnSelector&&e(t.options.dependingOnSelector).bind("change",function(){t._elements.$displayInput.trigger("apexrefresh")}),apex.widget.initPageItem(t._elements.$displayInput.attr("id"),{setValue:function(e,a){t._elements.$hiddenInput.val(e),t._elements.$displayInput.val(a),t._values.lastDisplayValue=a},getValue:function(){return t._elements.$hiddenInput.val()},show:function(){t.show()},hide:function(){t.hide()},enable:function(){t.enable()},disable:function(){t.disable()}})},_initBaseElements:function(){var t=this;t.options.debug&&apex.debug("Super LOV - Initialize Base Elements ("+t._values.apexItemId+")"),t._elements.$itemHolder=e("table#"+t._values.apexItemId+"_holder"),t._elements.$hiddenInput=e("#"+t._values.apexItemId+"_HIDDENVALUE"),t._elements.$displayInput=t.element,t._elements.$label=e('label[for="'+t._values.apexItemId+'"]'),t._elements.$fieldset=e("#"+t._values.controlsId),t._elements.$clearButton=e("#"+t._values.controlsId+" button.superlov-modal-delete"),t._elements.$openButton=e("#"+t._values.controlsId+" button.superlov-modal-open")},_initElements:function(){var t=this;t.options.debug&&apex.debug("Super LOV - Initialize Elements ("+t._values.apexItemId+")"),t._elements.$window=e(window),t._elements.$outerDialog=e("div.superlov-dialog"),t._elements.$dialog=e("div.superlov-container"),t._elements.$buttonContainer=e("div.superlov-button-container"),t._elements.$searchContainer=e("div.superlov-search-container"),t._elements.$paginationContainer=e("div.superlov-pagination-container"),t._elements.$columnSelect=e("select#superlov-column-select"),t._elements.$filter=e("input#superlov-filter"),t._elements.$searchButton=e("div.superlov-search-icon"),t._elements.$prevButton=e("button#superlov-prev-page"),t._elements.$paginationDisplay=e("span#superlov-pagination-display"),t._elements.$nextButton=e("button#superlov-next-page"),t._elements.$wrapper=e("div.superlov-table-wrapper"),t._elements.$actionlessFocus=e("#superlov-focusable")},_initTransientElements:function(){var t=this;t.options.debug&&apex.debug("Super LOV - Initialize Transient Elements ("+t._values.apexItemId+")"),t._elements.$table=e("table.superlov-table"),t._elements.$nodata=e("div.superlov-nodata"),t._elements.$moreRows=e("input#asl-super-lov-more-rows")},_initButtons:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Initialize Buttons ("+e._values.apexItemId+")"),e._elements.$searchButton.bind("click",{uiw:e},e._handleSearchButtonClick),e._elements.$prevButton.button({text:!1,icons:{primary:"ui-icon-arrowthick-1-w"}}).bind("click",{uiw:e},e._handlePrevButtonClick),e._elements.$nextButton.button({text:!1,icons:{primary:"ui-icon-arrowthick-1-e"}}).bind("click",{uiw:e},e._handleNextButtonClick)},_initColumnSelect:function(){var t=this,a=t._elements.$columnSelect.get(0),l=1;for(t.options.debug&&apex.debug("Super LOV - Initialize Column Select ("+t._values.apexItemId+")"),x=0;x<t.options.reportHeaders.length;x++)!t._isHiddenCol(x+1)&&t._isSearchableCol(x+1)&&(a.options[l]=new Option(t.options.reportHeaders[x],x+1),l+=1);e('select#superlov-column-select option[value="'+t.options.displayColNum+'"]').attr("selected","selected")},_handleColumnChange:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Handle Column Change ("+e._values.apexItemId+")"),e._elements.$columnSelect.val()?e._elements.$filter.removeAttr("disabled"):e._elements.$filter.val("").attr("disabled","disabled"),e._updateStyledFilter()},_ieNoSelectText:function(){var t=this;t.options.debug&&apex.debug("Super LOV - IE No Select Text ("+t._values.apexItemId+")"),document.attachEvent&&e("div.superlov-table-wrapper *").each(function(){e(this)[0].attachEvent("onselectstart",function(){return!1})})},_isHiddenCol:function(e){var t=this,a=!1;for(t.options.debug&&apex.debug("Super LOV - Is Hidden Column ("+t._values.apexItemId+")"),i=0;i<t._values.hiddenCols.length;i++)if(parseInt(e,10)===parseInt(t._values.hiddenCols[i],10)){a=!0;break}return a},_isSearchableCol:function(e){var t=this,a=!1;if(t.options.debug&&apex.debug("Super LOV - Is Searchable Column ("+t._values.apexItemId+")"),t._values.searchableCols.length){for(i=0;i<t._values.searchableCols.length;i++)if(parseInt(e,10)===parseInt(t._values.searchableCols[i],10)){a=!0;break}}else a=!0;return a},_showDialog:function(){var t,a,l=this;l.options.debug&&apex.debug("Super LOV - Show Dialog ("+l._values.apexItemId+")"),a='<div id="'+l._values.apexItemId+'_superlov" class="superlov-container ui-widget utr-container">\n   <div class="superlov-button-container ui-widget-header ui-corner-all ui-helper-clearfix">\n      <div class="superlov-search-container">\n         <table>\n            <tr>\n               <td valign="middle">\n                  Search<a id="superlov-focusable" href="#" style="text-decoration: none;">&nbsp;</a>\n               </td>\n               <td valign="middle">\n                  <select id="superlov-column-select" size="1">\n                     <option value="">- Select Column -</option>\n                  </select>\n               </td>\n               <td>\n                  <div id="superlov_styled_filter" class="ui-corner-all">\n                     <table>\n                        <tbody>\n                           <tr>\n                              <td>\n                                 <input type="text" id="superlov-filter" class="ui-corner-all"/>\n                              </td>\n                              <td>\n                                 <div class="ui-state-highlight superlov-search-icon"><span class="ui-icon ui-icon-circle-zoomin"></span></div>\n                              </td>\n                           </tr>\n                        </tbody>\n                     </table>\n                  </div>\n               </td>\n            </tr>\n         </table>\n      </div>\n      <div class="superlov-pagination-container">\n         <table>\n            <tr>\n               <td valign="middle">\n                  <button id="superlov-prev-page">Previous Page</button>\n               </td>\n               <td valign="middle">\n                  <span id="superlov-pagination-display">Page 1</span>\n               </td>\n               <td valign="middle">\n                  <button id="superlov-next-page">Next Page</button>\n               </td>\n            </tr>\n         </table>\n      </div>\n   </div>\n      <div class="superlov-table-wrapper">\n         <img id="superlov-loading-image" src="'+l.options.loadingImageSrc+'">\n   </div>\n</div>\n',e("body").append(a),l._initElements(),l._values.pagination="1:"+l.options.maxRowsPerPage,l._values.curPage=1,l._initButtons(),l._elements.$filter.bind("focus",{uiw:l},l._handleFilterFocus);var n=l._elements.$filter.css("border-top-color"),s=l._elements.$filter.css("border-top-width"),o=l._elements.$filter.css("border-top-style"),i=l._elements.$filter.css("background-color"),u=l._elements.$filter.css("background-image"),r=l._elements.$filter.css("background-repeat"),d=l._elements.$filter.css("background-attachment"),p=l._elements.$filter.css("background-position");l._elements.$filter.css("border","none"),e("#superlov_styled_filter").css({"border-color":n,"border-width":s,"border-style":o,"background-color":i,"background-image":u,"background-repeat":r,"background-attachment":d,"background-position":p}),l._disableSearchButton(),l._disablePrevButton(),l._disableNextButton(),t=l._elements.$buttonContainer.height(),l._elements.$dialog.dialog({disabled:!1,autoOpen:!1,closeOnEscape:!0,closeText:"Close",dialogClass:"superlov-dialog",draggable:!0,height:"auto",hide:null,maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:!1,modal:!0,resizable:!1,show:null,stack:!0,title:l.options.dialogTitle,open:function(){l._elements.$filter.trigger("focus"),"DIALOG"===l._values.fetchLovMode?l._fetchLov():"ENTERABLE"===l._values.fetchLovMode&&l._elements.$filter.val(l._values.searchString),l._values.fetchLovMode="DIALOG"},close:function(){e("body").unbind("keydown",l._handleBodyKeydown),e(document).unbind("keydown",l._disableArrowKeyScrolling),e(document).off("mouseenter","table.superlov-table tbody tr").off("mouseleave","table.superlov-table tbody tr").off("click","table.superlov-table tbody tr"),l._values.active=!1,l._values.fetchLovInProcess=!1,e(this).dialog("destroy").remove(),l._elements.$dialog.remove(),"BUTTON"===l._values.focusOnClose?l._elements.$openButton.focus():"INPUT"===l._values.focusOnClose&&l._elements.$displayInput.focus(),""===l._elements.$displayInput.val()&&(l.allowChangePropagation(),l._elements.$hiddenInput.trigger("change"),l._elements.$displayInput.trigger("change"),l.preventChangePropagation()),l._values.focusOnClose="BUTTON"}}),l._initElements(),l._elements.$dialog.css("overflow","hidden"),l._values.dialogTop=.05*l._elements.$window.height(),l._values.dialogLeft=l._elements.$window.width()/2-l._elements.$outerDialog.outerWidth(!0)/2,l._values.dialogLeft<0&&(l._values.dialogLeft=0),l._elements.$dialog.dialog().dialog("option","position",[l._values.dialogLeft,l._values.dialogTop]),l._ieNoSelectText(),e("body").bind("keydown",{uiw:l},l._handleBodyKeydown),e(document).bind("keydown",{uiw:l},l._disableArrowKeyScrolling),e(document).on("mouseenter","table.superlov-table tbody tr",{uiw:l},l._handleMainTrMouseenter).on("mouseleave","table.superlov-table tbody tr",{uiw:l},l._handleMainTrMouseleave).on("click","table.superlov-table tbody tr",{uiw:l},l._handleMainTrClick),l._elements.$window.bind("resize",{uiw:l},l._handleWindowResize),l._elements.$dialog.dialog("open"),l._initColumnSelect(),l._elements.$columnSelect.bind("change",function(){l._handleColumnChange()})},_handleWindowResize:function(e){var t,a=e.data.uiw;a.options.debug&&apex.debug("Super LOV - Handle Window Resize ("+a._values.apexItemId+")"),a._elements.$table.length||a._elements.$nodata.length||a._initTransientElements(),a._updateLovMeasurements(),a._elements.$outerDialog.css({height:a._values.dialogHeight,width:a._values.dialogWidth}),a._elements.$wrapper.css({height:a._values.wrapperHeight,width:a._values.wrapperWidth,overflow:"hidden"}),t=a._elements.$window.width()/2-a._elements.$outerDialog.outerWidth(!0)/2,t<0&&(t=0),a._elements.$outerDialog.css({top:a._values.dialogTop,left:t}),a._elements.$wrapper.css("overflow","auto")},_handleBodyKeydown:function(t){var a,l,n,s,o=t.data.uiw;if(o.options.debug&&apex.debug("Super LOV - Handle Body Keydown ("+o._values.apexItemId+")"),37!==t.which||o._elements.$prevButton.attr("disabled"))if(39!==t.which||o._elements.$nextButton.attr("disabled")){if(38===t.which&&t.target!=o._elements.$columnSelect[0])o._values.bodyKeyMode="ROWSELECT",o._elements.$actionlessFocus.trigger("focus"),a=o._elements.$table.find("tbody>tr").has("td.ui-state-hover"),l=0===a.length?o._elements.$table.find("tbody>tr:last"):a.get(0)===o._elements.$table.find("tbody>tr:first").get(0)?o._elements.$table.find("tbody>tr:last"):a.prev(),a.trigger("mouseout"),l.trigger("mouseover").focus(),n=l.position().top-o._elements.$wrapper.position().top,s={top:0,bottom:o._elements.$wrapper.outerHeight(!0)},l[0]===o._elements.$table.find("tbody>tr:first")[0]?o._elements.$wrapper.scrollTop(0):n<s.top?o._elements.$wrapper.scrollTop(o._elements.$wrapper.scrollTop()+n-5):n+l.height()>s.bottom&&o._elements.$wrapper.scrollTop(o._elements.$wrapper.scrollTop()+n+l.height()-s.bottom+5);else if(40===t.which&&t.target!=o._elements.$columnSelect[0])o._values.bodyKeyMode="ROWSELECT",o._elements.$actionlessFocus.trigger("focus"),a=o._elements.$table.find("tbody>tr").has("td.ui-state-hover"),l=0===a.length?o._elements.$table.find("tbody>tr:first"):a.get(0)===o._elements.$table.find("tbody>tr:last").get(0)?o._elements.$table.find("tbody>tr:first"):a.next(),a.trigger("mouseout"),l.trigger("mouseover").focus(),n=l.position().top-o._elements.$wrapper.position().top,s={top:0,bottom:o._elements.$wrapper.outerHeight(!0)},l[0]===o._elements.$table.find("tbody>tr:first")[0]?o._elements.$wrapper.scrollTop(0):n<s.top?o._elements.$wrapper.scrollTop(o._elements.$wrapper.scrollTop()+n-5):n+l.height()>s.bottom&&o._elements.$wrapper.scrollTop(o._elements.$wrapper.scrollTop()+n+l.height()-s.bottom+5);else if(13===t.which){if("ROWSELECT"===o._values.bodyKeyMode&&t.target!=o._elements.$columnSelect[0]&&t.target!=o._elements.$prevButton[0]&&t.target!=o._elements.$nextButton[0]&&t.target!=o._elements.$searchButton[0])return e("#superlov-fetch-results>tbody>tr").has("td.ui-state-hover").trigger("click"),t.preventDefault(),!1;"SEARCH"===o._values.bodyKeyMode&&t.target!=o._elements.$displayInput[0]&&t.target!=o._elements.$columnSelect[0]&&t.target!=o._elements.$prevButton[0]&&t.target!=o._elements.$nextButton[0]&&t.target!=o._elements.$searchButton[0]&&o._search()}}else"ROWSELECT"===o._values.bodyKeyMode&&o._handleNextButtonClick(t);else"ROWSELECT"===o._values.bodyKeyMode&&o._handlePrevButtonClick(t)},_handleOpenClick:function(e){var t=e.data.uiw;return t._values.active||(t._values.active=!0,t.options.debug&&apex.debug("Super LOV - Handle Open Click"),t._values.fetchLovMode="DIALOG",t._values.searchString="",t._showDialog()),!1},_handleEnterableKeypress:function(e){var t=e.data.uiw;13===e.which&&t._elements.$displayInput.val()!==t._values.lastDisplayValue&&(t._values.focusOnClose="INPUT",t._elements.$displayInput.trigger("blur"))},_handleEnterableBlur:function(e){var t=e.data.uiw;t._elements.$displayInput.val()!==t._values.lastDisplayValue&&(t._values.lastDisplayValue=t._elements.$displayInput.val(),t._handleEnterableChange())},_handleEnterableChange:function(){var e=this;for(x=0;x<e._values.mapToItems.length;x++)$s(e._values.mapToItems[x],"");e.options.enterable===e._values.ENTERABLE_RESTRICTED?e._elements.$displayInput.val()?(e._values.fetchLovMode="ENTERABLE",e._fetchLov()):e._elements.$hiddenInput.val(""):e.options.enterable===e._values.ENTERABLE_UNRESTRICTED&&e._elements.$hiddenInput.val(e._elements.$displayInput.val())},_fetchLov:function(){var t,a,l,n=this,s=0;n.options.debug&&apex.debug("Super LOV - Fetch LOV ("+n._values.apexItemId+")"),n._values.fetchLovInProcess||(n._values.fetchLovInProcess=!0,"DIALOG"===n._values.fetchLovMode?(l=!0,s=Math.floor(10000000001*Math.random()),n._elements.$wrapper.data("fetchLovId",s),n._disableSearchButton(),n._disablePrevButton(),n._disableNextButton(),n._elements.$window.unbind("resize",n._handleWindowResize),n._elements.$columnSelect.val()&&n._elements.$filter.val()?(t=n._elements.$columnSelect.val(),n._values.searchString=n._elements.$filter.val()):n._values.searchString=""):"ENTERABLE"===n._values.fetchLovMode&&(l=!1,n._elements.$fieldset.after('<span class="loading-indicator superlov-loading"></span>'),n._values.pagination="1:"+n.options.maxRowsPerPage,t=n.options.displayColNum,n._values.searchString=n._elements.$displayInput.val()),a={p_flow_id:e("#pFlowId").val(),p_flow_step_id:e("#pFlowStepId").val(),p_instance:e("#pInstance").val(),p_request:"PLUGIN="+n.options.ajaxIdentifier,x01:"FETCH_LOV",x02:n._values.pagination,x03:t,x04:n._values.searchString,x05:s,p_arg_names:[],p_arg_values:[]},e(n.options.dependingOnSelector).add(n.options.pageItemsToSubmit).each(function(e){a.p_arg_names[e]=this.id,a.p_arg_values[e]=$v(this)}),e.ajax({type:"POST",url:"wwv_flow.show",data:a,dataType:"text",async:l,success:function(e){n._values.ajaxReturn=e,n._handleFetchLovReturn()}}))},_handleFetchLovReturn:function(){var t,a,l=this,n=e(l._values.ajaxReturn);if(l.options.debug&&apex.debug("Super LOV - Handle Fetch LOV Return ("+l._values.apexItemId+")"),"DIALOG"===l._values.fetchLovMode&&Number(e(l._values.ajaxReturn).attr("data-fetch-lov-id"))!==l._elements.$wrapper.data("fetchLovId"))return l.options.debug&&apex.debug("...Ajax return mismatch - exiting early"),void l._elements.$dialog.css("height","auto");if(a=n.find("tr").length-1,"ENTERABLE"===l._values.fetchLovMode){if(l._elements.$fieldset.next("span.loading-indicator").remove(),1===a)return l.options.debug&&apex.debug("...Found exact match, setting display and return inputs"),l._values.fetchLovInProcess=!1,l._elements.$selectedRow=n.find("tr:eq(1)"),void l._setValuesFromRow();l.options.debug&&apex.debug("...Exact match not found, opening dialog"),l._elements.$hiddenInput.val(""),l._elements.$displayInput.val(""),l._values.lastDisplayValue="",l._showDialog()}l._elements.$wrapper.fadeTo(0,0).css({height:"0px",overflow:"hidden"}).empty(),0===a?(t='<div class="ui-widget superlov-nodata">\n   <div class="ui-state-highlight ui-corner-all" style="padding: 0pt 0.7em;">\n      <p>\n      <span class="ui-icon ui-icon-alert" style="float: left; margin-right:0.3em;"></span>\n      '+l.options.noDataFoundMsg+"\n      </p>\n   </div>\n</div>\n",l._elements.$wrapper.html(t)):(l._elements.$wrapper.html(l._values.ajaxReturn),e("table.superlov-table th:first").addClass("ui-corner-tl"),e("table.superlov-table th:last").addClass("ui-corner-tr"),e("table.superlov-table tr:last td:first").addClass("ui-corner-bl"),e("table.superlov-table tr:last td:last").addClass("ui-corner-br")),l._ieNoSelectText(),l._initTransientElements(),l._values.moreRows="Y"===l._elements.$moreRows.val(),l._highlightSelectedRow(),l._updatePaginationDisplay(),l._enableSearchButton(),l._values.moreRows?l._enableNextButton():l._disableNextButton(),l._elements.$table.length?(apex.debug("wrapper width: "+l._elements.$wrapper.width()),apex.debug("table width: "+l._elements.$table.width()),l._elements.$table.width(l._elements.$table.width())):l._elements.$nodata.length&&l._elements.$nodata.width(l._elements.$nodata.width()),l._resizeModal(),l._values.fetchLovInProcess=!1,l._elements.$dialog.css("height","auto")},_resizeModal:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Resize Modal ("+e._values.apexItemId+")"),e._updateLovMeasurements(),e._elements.$dialog.css("height","auto"),0===e.options.effectsSpeed?(e._elements.$outerDialog.css({height:e._values.dialogHeight,width:e._values.dialogWidth,left:e._values.dialogLeft}),e._elements.$nodata.length&&e._elements.$nodata.width(e._values.wrapperWidth),e._elements.$wrapper.css({height:e._values.wrapperHeight,width:e._values.wrapperWidth,overflow:"auto"}).fadeTo(e.options.effectsSpeed,1),e._elements.$window.bind("resize",{uiw:e},e._handleWindowResize)):e._elements.$outerDialog.animate({height:e._values.dialogHeight},e.options.effectsSpeed,function(){e._elements.$outerDialog.animate({width:e._values.dialogWidth,left:e._values.dialogLeft},e.options.effectsSpeed,function(){e._elements.$nodata.length&&e._elements.$nodata.width(e._values.wrapperWidth),e._elements.$wrapper.css({height:e._values.wrapperHeight,width:e._values.wrapperWidth,overflow:"auto"}).fadeTo(e.options.effectsSpeed,1),e._elements.$window.bind("resize",{uiw:e},e._handleWindowResize)})})},_search:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Search ("+e._values.apexItemId+")"),e._values.curPage=1,e._values.pagination="1:"+e.options.maxRowsPerPage,""===e._elements.$filter.val()&&(e._elements.$columnSelect.val(""),e._handleColumnChange()),e._disablePrevButton(),e._values.fetchLovMode="DIALOG",e._fetchLov()},_updatePaginationDisplay:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Update Pagination Display ("+e._values.apexItemId+")"),e._elements.$paginationDisplay.html("Page "+e._values.curPage)},_disableSearchButton:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Disable Search Button ("+e._values.apexItemId+")"),e._disableButton("search")},_disablePrevButton:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Disable Prev Button ("+e._values.apexItemId+")"),e._disableButton("prev")},_disableNextButton:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Disable Next Button ("+e._values.apexItemId+")"),e._disableButton("next")},_disableButton:function(e){var t,a=this;return a.options.debug&&apex.debug("Super LOV - Disable Button ("+a._values.apexItemId+")"),"search"==e?(t=a._elements.$searchButton,void t.attr("disabled","disabled").removeClass("ui-state-hover").removeClass("ui-state-focus").css("cursor","default")):("prev"==e?t=a._elements.$prevButton:"next"==e&&(t=a._elements.$nextButton),void t.attr("disabled","disabled").removeClass("ui-state-hover").removeClass("ui-state-focus").css({opacity:"0.5",cursor:"default"}))},_enableSearchButton:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Enable Search Button ("+e._values.apexItemId+")"),e._enableButton("search")},_enablePrevButton:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Enable Prev Button ("+e._values.apexItemId+")"),e._enableButton("prev")},_enableNextButton:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Enable Next Button ("+e._values.apexItemId+")"),e._enableButton("next")},_enableButton:function(e){var t,a=this;return a.options.debug&&apex.debug("Super LOV - Enable Button ("+a._values.apexItemId+")"),"search"==e?(t=a._elements.$searchButton,void t.removeAttr("disabled").css("cursor","pointer")):("prev"==e?t=a._elements.$prevButton:"next"==e&&(t=a._elements.$nextButton),void t.removeAttr("disabled").css({opacity:"1",cursor:"pointer"}))},_highlightSelectedRow:function(){var t=this,a=e('table.superlov-table tbody tr[data-return="'+t._elements.$hiddenInput.val()+'"]');t.options.debug&&apex.debug("Super LOV - Highlight Selected Row ("+t._values.apexItemId+")"),a.children("td").removeClass("ui-state-default").addClass("ui-state-active")},_handleMainTrMouseenter:function(t){var a=t.data.uiw,l=e(t.currentTarget),n=a._elements.$table.find("tbody>tr").has("td.ui-state-hover");a.options.debug&&apex.debug("Super LOV: _handleMainTrMouseenter ("+a._values.apexItemId+")"),n.length&&(n.children("td.ui-state-hover-active").length?n.children("td").removeClass("ui-state-hover ui-state-hover-active").addClass("ui-state-active"):n.children("td").removeClass("ui-state-hover").addClass("ui-state-default")),l.children("td:not(.ui-state-active)").length?l.children("td").removeClass("ui-state-default").addClass("ui-state-hover"):l.children("td").removeClass("ui-state-active").addClass("ui-state-hover ui-state-hover-active")},_handleMainTrMouseleave:function(t){var a=t.data.uiw,l=e(t.currentTarget);a.options.debug&&apex.debug("Super LOV: _handleMainTrMouseleave ("+a._values.apexItemId+")"),l.children("td.ui-state-hover-active").length?l.children("td").removeClass("ui-state-hover ui-state-hover-active").addClass("ui-state-active"):l.children("td").removeClass("ui-state-hover").addClass("ui-state-default")},_handleMainTrClick:function(t){var a=t.data.uiw;a._elements.$selectedRow=e(t.currentTarget),a._setValuesFromRow()},_setValuesFromRow:function(){var t,a=this,l=a._elements.$selectedRow.attr("data-return"),n=a._elements.$selectedRow.attr("data-display");for(a.options.debug&&(apex.debug("Super LOV - Set values from row ("+a._values.apexItemId+")"),apex.debug('...returnVal: "'+l+'"'),apex.debug('...displayVal: "'+n+'"')),t=a._elements.$hiddenInput.val()!==l,a.options.debug&&apex.debug('...valChanged: "'+t+'"'),a._elements.$hiddenInput.val(l),a._elements.$displayInput.val(n),a._values.lastDisplayValue=n,x=0;x<a._values.mapToItems.length;x++)a._isHiddenCol(a._values.mapFromCols[x])?$s(a._values.mapToItems[x],a._elements.$selectedRow.attr("data-col"+a._values.mapFromCols[x]+"-value")):$s(a._values.mapToItems[x],a._elements.$selectedRow.children("td.asl-col"+a._values.mapFromCols[x]).text());if("DIALOG"===a._values.fetchLovMode){a.options.debug&&apex.debug("...In dialog mode; close dialog");var s=e("div.superlov-container").data("ui-dialog");s&&s.close()}t&&(a.allowChangePropagation(),a._elements.$hiddenInput.trigger("change"),a._elements.$displayInput.trigger("change"),a.preventChangePropagation())},_handleSearchButtonClick:function(e){var t=e.data.uiw;t.options.debug&&apex.debug("Super LOV - Handle Search Button Click ("+t._values.apexItemId+")"),t._search()},_handlePrevButtonClick:function(e){var t,a,l=e.data.uiw;l.options.debug&&apex.debug("Super LOV - Handle Prev Button Click ("+l._values.apexItemId+")"),l._values.fetchLovMode="DIALOG",l._values.curPage=l._values.curPage-1,1===l._values.curPage?(t=1,a=l.options.maxRowsPerPage,l._values.pagination=t+":"+a,l._fetchLov(),l._disablePrevButton()):(t=(l._values.curPage-1)*l.options.maxRowsPerPage+1,a=l._values.curPage*l.options.maxRowsPerPage,l._values.pagination=t+":"+a,l._fetchLov(),l._enablePrevButton())},_handleNextButtonClick:function(e){var t,a,l=e.data.uiw;l.options.debug&&apex.debug("Super LOV - Handle Next Button Click ("+l._values.apexItemId+")"),l._values.fetchLovMode="DIALOG",l._values.curPage=l._values.curPage+1,t=(l._values.curPage-1)*l.options.maxRowsPerPage+1,a=l._values.curPage*l.options.maxRowsPerPage,l._values.pagination=t+":"+a,l._fetchLov(),l._elements.$paginationDisplay.html("Page "+l._values.curPage),l._values.curPage>=2&&l._elements.$prevButton.attr("disabled")&&l._enablePrevButton()},_refresh:function(){var e=this,t=e._elements.$hiddenInput.val();for(e.options.debug&&apex.debug("Super LOV - Refresh ("+e._values.apexItemId+")"),e._elements.$displayInput.trigger("apexbeforerefresh"),e._elements.$hiddenInput.val(""),e._elements.$displayInput.val(""),e._values.lastDisplayValue="",x=0;x<e._values.mapToItems.length;x++)$s(e._values.mapToItems[x],"");return e._elements.$displayInput.trigger("apexafterrefresh"),t!==e._elements.$hiddenInput.val()&&(e.allowChangePropagation(),e._elements.$hiddenInput.trigger("change"),e._elements.$displayInput.trigger("change"),e.preventChangePropagation()),!1},_updateLovMeasurements:function(){var t,a,l,n,s,o,i,u,r,d,p,_,c=this,v=25,m=!1,g=!1,h=!0;c.options.debug&&apex.debug("Super LOV - Update LOV Measurements ("+c._values.apexItemId+")"),c._elements.$nodata.length?(h=!1,t=c._elements.$nodata):t=c._elements.$table,a=e("div.superlov-dialog div.ui-dialog-titlebar").outerHeight(!0)+c._elements.$buttonContainer.outerHeight(!0)+e("div.superlov-dialog div.ui-dialog-buttonpane").outerHeight(!0)+(c._elements.$dialog.outerHeight(!0)-c._elements.$dialog.height())+(c._elements.$wrapper.outerHeight(!0)-c._elements.$wrapper.height()),l=c._elements.$outerDialog.css("max-height"),c._values.percentRegExp.test(l)?(l=parseFloat(l),l=c._elements.$window.height()*(l/100)):l=c._values.pixelRegExp.test(l)?parseFloat(l):.9*c._elements.$window.height(),l=.9*c._elements.$window.height(),s=c._elements.$dialog.outerWidth(!0)-c._elements.$dialog.width(),o=c._elements.$outerDialog.css("min-width"),c._values.percentRegExp.test(o)?(o=parseFloat(o),o=c._elements.$window.width()*(o/100)):o=c._values.pixelRegExp.test(o)?parseFloat(o):c._elements.$buttonContainer.outerWidth(!0),i=c._elements.$outerDialog.css("max-width"),c._values.percentRegExp.test(i)?(i=parseFloat(i),i=c._elements.$window.width()*(i/100)):i=c._values.pixelRegExp.test(i)?parseFloat(i):.9*c._elements.$window.width(),i=.9*c._elements.$window.width(),a+t.outerHeight(!0)>l?(m=!0,n=l-a):n=t.outerHeight(!0),h?(u=t.outerWidth(!0),m&&(u+=v),s+u<o?u=o-s:s+u>i&&(g=!0,u=i-s,u<o&&(u=o-s)),g&&!m&&(a+t.outerHeight(!0)+v>l?(m=!0,n=l-a):n=t.outerHeight(!0)+v)):u=o-s,d=a+n,r=s+u,c._values.wrapperHeight=n,c._values.wrapperWidth=u,c._values.dialogHeight=d,c._values.dialogWidth=r,p=(c._values.dialogWidth-c._elements.$outerDialog.width())/2,_=c._elements.$outerDialog.css("left"),c._values.percentRegExp.test(_)?(_=parseFloat(_),_=c._elements.$window.width()*(_/100)):_=c._values.pixelRegExp.test(_)?parseFloat(_):0,_-=p,_<0&&(_=0),c._values.dialogLeft=_,c._values.dialogTop=.05*c._elements.$window.height()+e(document).scrollTop()},_updateStyledFilter:function(){var t=this,a=t._elements.$filter.css("background-color"),l=t._elements.$filter.css("background-image"),n=t._elements.$filter.css("background-repeat"),s=t._elements.$filter.css("background-attachment"),o=t._elements.$filter.css("background-position");t.options.debug&&apex.debug("Super LOV - Update Styled Filter ("+t._values.apexItemId+")"),e("#superlov_styled_filter").css({"background-color":a,"background-image":l,"background-repeat":n,"background-attachment":s,"background-position":o})},_updateStyledInput:function(){var e=this,t=e._elements.$displayInput.css("background-color"),a=e._elements.$displayInput.css("background-image"),l=e._elements.$displayInput.css("background-repeat"),n=e._elements.$displayInput.css("background-attachment"),s=e._elements.$displayInput.css("background-position");e.options.debug&&apex.debug("Super LOV - Update Styled Input ("+e._values.apexItemId+")"),e._elements.$fieldset.css({"background-color":t,"background-image":a,"background-repeat":l,"background-attachment":n,"background-position":s})},_handleClearClick:function(e){var t=e.data.uiw,a=t._elements.$clearButton.find("span.ui-icon");t.options.debug&&apex.debug("Super LOV - Clear LOV ("+t._values.apexItemId+")"),0!==e.screenX&&0!==e.screenY&&e.target.blur(),""!==t._elements.$displayInput.val()&&("N"===t.options.useClearProtection?t._refresh():a.hasClass("ui-icon-circle-close")?(a.removeClass("ui-icon-circle-close").addClass("ui-icon-alert"),
t._values.deleteIconTimeout=setTimeout("$('#"+t._values.controlsId+" button>span.ui-icon-alert').removeClass('ui-icon-alert').addClass('ui-icon-circle-close');",1e3)):(clearTimeout(t._values.deleteIconTimeout),t._values.deleteIconTimeout="",t._refresh(),a.removeClass("ui-icon-alert").addClass("ui-icon-circle-close")))},_disableArrowKeyScrolling:function(e){var t=e.data.uiw,a=e.which;if(37===a||39===a){if("ROWSELECT"===t._values.bodyKeyMode)return e.preventDefault(),!1}else if(38===a||40===a)return e.preventDefault(),!1;return!0},_handleFilterFocus:function(e){var t=e.data.uiw;t._values.bodyKeyMode="SEARCH"},disable:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Disabling Item ("+e._values.apexItemId+")"),e._values.disabled===!1&&(e.options.enterable!==e._values.ENTERABLE_RESTRICTED&&e.options.enterable!==e._values.ENTERABLE_UNRESTRICTED||e._elements.$displayInput.attr("disabled","disabled").unbind("keypress",e._handleEnterableKeypress).unbind("blur",{uiw:e},e._handleEnterableBlur),e._elements.$hiddenInput.attr("disabled","disabled"),e._elements.$openButton.unbind("click",e._handleOpenClick),e._elements.$clearButton.unbind("click",e._handleClearClick),e._elements.$itemHolder.find("div.superlov-controls-buttons").buttonset("disable")),e._values.disabled=!0,e._elements.$label.parent().addClass("apex_disabled"),e._elements.$fieldset.parent().addClass("apex_disabled")},enable:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Enabling Item ("+e._values.apexItemId+")"),e._values.disabled===!0&&(e.options.enterable!==e._values.ENTERABLE_RESTRICTED&&e.options.enterable!==e._values.ENTERABLE_UNRESTRICTED||e._elements.$displayInput.removeAttr("disabled").bind("keypress",{uiw:e},e._handleEnterableKeypress).bind("blur",{uiw:e},e._handleEnterableBlur),e._elements.$hiddenInput.removeAttr("disabled"),e._elements.$openButton.bind("click",{uiw:e},e._handleOpenClick),e._elements.$clearButton.bind("click",{uiw:e},e._handleClearClick),e._elements.$itemHolder.find("div.superlov-controls-buttons").buttonset("enable")),e._values.disabled=!1,e._elements.$label.parent().removeClass("apex_disabled"),e._elements.$fieldset.parent().removeClass("apex_disabled")},hide:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Hiding Item ("+e._values.apexItemId+")"),e._elements.$fieldset.hide(),e._elements.$label.hide()},show:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Showing Item ("+e._values.apexItemId+")"),e._elements.$fieldset.show(),e._elements.$label.show()},hideRow:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Hiding Row ("+e._values.apexItemId+")"),"td"===e._elements.$label.parent().prop("tagName").toLowerCase()?e._elements.$label.closest("tr").hide():(e._elements.$fieldset.closest(".apex_row").hide(),e._elements.$fieldset.closest(".fieldContainer").hide())},showRow:function(){var e=this;e.options.debug&&apex.debug("Super LOV - Showing Row ("+e._values.apexItemId+")"),"td"===e._elements.$label.parent().prop("tagName").toLowerCase()?e._elements.$label.closest("tr").show():(e._elements.$fieldset.closest(".apex_row").show(),e._elements.$fieldset.closest(".fieldContainer").show())},allowChangePropagation:function(){var e=this;e._values.changePropagationAllowed=!0},preventChangePropagation:function(){var e=this;e._values.changePropagationAllowed=!1},changePropagationAllowed:function(){var e=this;return e._values.changePropagationAllowed},getValuesByReturn:function(t){var a=this;return a.options.debug&&apex.debug("Super LOV - Getting Values by Return Value ("+a._values.apexItemId+")"),queryString={p_flow_id:e("#pFlowId").val(),p_flow_step_id:e("#pFlowStepId").val(),p_instance:e("#pInstance").val(),p_request:"PLUGIN="+a.options.ajaxIdentifier,x01:"GET_VALUES_BY_RETURN",x06:t},e.ajax({type:"POST",url:"wwv_flow.show",data:queryString,dataType:"json",async:!1,success:function(e){a.options.debug&&apex.debug(e),a._values.ajaxReturn=e}}),a._values.ajaxReturn},setValuesByReturn:function(e){var t,a=this;if(t=a.getValuesByReturn(e),void 0!==t.error)for(a._elements.$fieldset.hasClass("super-lov-not-enterable")||a._elements.$fieldset.hasClass("super-lov-enterable-restricted")?(a._elements.$hiddenInput.val(""),a._elements.$displayInput.val(""),a._values.lastDisplayValue=""):a._elements.$fieldset.hasClass("super-lov-enterable-unrestricted")&&(a._elements.$hiddenInput.val(e),a._elements.$displayInput.val(e),a._values.lastDisplayValue=e),x=0;x<a._values.mapToItems.length;x++)$s(a._values.mapToItems[x],"");else if(t.matchFound){if(a._elements.$hiddenInput.val(t.returnVal),a._elements.$displayInput.val(t.displayVal),a._values.lastDisplayValue=t.displayVal,t.mappedColumns)for(x=0;x<t.mappedColumns.length;x++)$s(t.mappedColumns[x].mapItem,t.mappedColumns[x].mapVal)}else for(a._elements.$fieldset.hasClass("super-lov-not-enterable")||a._elements.$fieldset.hasClass("super-lov-enterable-restricted")?(a._elements.$hiddenInput.val(""),a._elements.$displayInput.val(""),a._values.lastDisplayValue=""):a._elements.$fieldset.hasClass("super-lov-enterable-unrestricted")&&(a._elements.$hiddenInput.val(e),a._elements.$displayInput.val(e),a._values.lastDisplayValue=e),x=0;x<a._values.mapToItems.length;x++)$s(a._values.mapToItems[x],"")}})}($);
//# sourceMappingURL=maps/apex-super-lov.min.js.map
